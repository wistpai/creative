<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‰µä½œåŠ›å…­é‚Šå‹ 2.1 (Beta)</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        :root {
            --primary-color: #2c3e50;
            --accent-color: #e67e22;
            --bg-color: #f8f9fa;
            --card-bg: #ffffff;
        }
        body {
            font-family: "Microsoft JhengHei", sans-serif;
            background-color: var(--bg-color);
            color: #333;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
        }
        .container {
            background: var(--card-bg);
            width: 100%;
            max-width: 1000px;
            padding: 40px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            border-radius: 15px;
        }
        h1 { text-align: center; color: var(--primary-color); margin-bottom: 5px; font-size: 2em; }
        p.subtitle { text-align: center; color: #888; font-size: 0.9em; margin-bottom: 10px; letter-spacing: 1px; }
        .quote-box {
            text-align: center;
            background: #fdfdfd;
            border: 1px dashed #ccc;
            padding: 10px 20px;
            margin: 0 auto 30px auto;
            border-radius: 50px;
            font-size: 0.9em;
            color: #555;
            max-width: 80%;
            line-height: 1.5;
        }
        
        .name-section { text-align: center; margin-bottom: 35px; min-height: 60px; }
        .name-wrapper {
            display: inline-flex; align-items: center; background: #f1f4f6;
            padding: 10px 20px; border-radius: 50px; border: 1px solid #ddd;
        }
        .name-wrapper label { font-weight: bold; color: var(--primary-color); margin-right: 10px; font-size: 1.1em; }
        .name-wrapper input {
            border: none; background: transparent; border-bottom: 2px solid #ccc;
            font-size: 1.3em; width: 180px; text-align: center; color: var(--accent-color);
            font-weight: bold; font-family: "Microsoft JhengHei", sans-serif; transition: border-color 0.3s;
        }
        .name-wrapper input:focus { outline: none; border-bottom-color: var(--accent-color); }

        .layout { display: flex; flex-wrap: wrap; gap: 40px; margin-bottom: 40px; }
        .controls { flex: 1; min-width: 300px; }
        .visuals { flex: 1; min-width: 300px; display: flex; flex-direction: column; align-items: center; }

        .input-group { margin-bottom: 15px; position: relative; }
        .input-group label { display: block; font-weight: bold; margin-bottom: 5px; display: flex; justify-content: space-between; align-items: center; }
        .input-group input[type=range] { width: 100%; cursor: pointer; accent-color: var(--primary-color); margin: 5px 0; }
        .score-display { color: white; background: var(--accent-color); padding: 2px 8px; border-radius: 10px; font-size: 0.9em; }
        .desc-box { background: #f4f6f7; border-left: 4px solid var(--primary-color); padding: 8px 12px; font-size: 0.85em; color: #555; border-radius: 0 4px 4px 0; min-height: 36px; display: flex; align-items: center; }

        .results-card { background: #fff; border: 1px solid #eee; padding: 20px; border-radius: 10px; width: 100%; margin-top: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
        .stat-group { margin-bottom: 20px; border-bottom: 1px solid #eee; padding-bottom: 20px; }
        .stat-group:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
        
        .stat-row { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 10px; }
        .stat-label { font-weight: bold; color: var(--primary-color); font-size: 1.1em; }
        .stat-desc-static { font-size: 0.8em; color: #777; margin-top: 4px; line-height: 1.4; max-width: 220px; }
        
        .stat-value-container { text-align: right; }
        .stat-value { font-weight: bold; font-size: 1.6em; color: var(--accent-color); line-height: 1; }
        .stat-rank { font-size: 1em; color: #2c3e50; font-weight: bold; display: block; margin-top: 5px; }

        .diagnosis-box {
            background: #f8f9fa;
            border-radius: 6px;
            padding: 10px 15px;
            font-size: 0.85em;
            color: #555;
            line-height: 1.6;
            border-left: 3px solid #bdc3c7;
            margin-top: 10px;
        }
        .diagnosis-box strong { color: #2c3e50; }

        .definitions-section { border-top: 2px dashed #eee; padding-top: 30px; margin-top: 20px; }
        .section-title { text-align: center; font-weight: bold; color: var(--primary-color); margin-bottom: 20px; font-size: 1.2em; }
        .def-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 15px; }
        .def-card { background: #fdfdfd; border: 1px solid #e0e0e0; border-radius: 8px; padding: 15px; font-size: 0.9em; line-height: 1.5; }
        .def-title { color: var(--accent-color); font-weight: bold; margin-bottom: 5px; font-size: 1.1em; }

        .btn { display: block; width: 100%; padding: 15px; background: var(--primary-color); color: white; border: none; border-radius: 8px; font-size: 1.1em; cursor: pointer; margin-top: 20px; transition: background 0.3s; font-weight: bold; }
        .btn:hover { background: #34495e; }

        #capture-area { padding: 30px; background: white; border-radius: 10px; }
    </style>
</head>
<body>

<div class="container">
    <div id="capture-area">
        <h1>å‰µä½œåŠ›å…­é‚Šå‹ 2.1 (Beta)</h1>
        <p class="subtitle">Designed by PaiPinChien</p>
        <div class="quote-box">
            ã€Œè‚šå­è£¡æœ‰å¢¨æ°´ï¼Œå¿…é ˆè¦å€’å¾—å‡ºä¾†ã€‚ã€<br>
            å‰µä½œåŠ›æ˜¯ä¸€ç¨®è¼¸å‡ºçš„æŠ€è¡“ï¼Œå°‡å…§åœ¨æ€è€ƒè½‰åŒ–ç‚ºå¯è¦‹çš„å½¢å¼ã€‚
        </div>

        <div class="name-section" id="name-section-container">
            <div class="name-wrapper" id="original-name-wrapper">
                <label for="username">å‰µä½œè€…å§“åï¼š</label>
                <input type="text" id="username" placeholder="è«‹è¼¸å…¥å§“å" maxlength="15">
            </div>
        </div>

        <div class="layout">
            <div class="controls">
                <div style="margin-bottom: 15px; font-weight:bold; color:#555;">è«‹æ»‘å‹•èª¿æ•´å„é …æ•¸å€¼ (1-15)ï¼š</div>
                <div id="inputs-container"></div>
            </div>

            <div class="visuals">
                <div style="width: 100%; max-width: 350px;">
                    <canvas id="radarChart"></canvas>
                </div>

                <div class="results-card">
                    <div class="stat-group">
                        <div class="stat-row">
                            <div>
                                <div class="stat-label">ç¶œåˆæŒ‡æ•¸ (å»£åº¦)</div>
                                <div class="stat-desc-static">
                                    ä»£è¡¨å‰µä½œç‰ˆåœ–ç¸½é¢ç©ã€‚<br>
                                    60åˆ†ç‚ºå…·å‚™åŸºç¤è¼¸å‡ºæŠ€è¡“çš„å¹³å‡ç·šã€‚<br>
                                    180åˆ†ç‚ºå…·å‚™è·¨åŸŸæ•´åˆåŠ›çš„é–€æª»ã€‚
                                </div>
                            </div>
                            <div class="stat-value-container">
                                <div class="stat-value" id="score-area">0</div>
                                <div class="stat-rank" id="title-area">âš™ï¸ æ©Ÿæ¢°æ¨¡å¼</div>
                            </div>
                        </div>
                        <div class="diagnosis-box" id="desc-area">
                            ...
                        </div>
                    </div>

                    <div class="stat-group">
                        <div class="stat-row">
                            <div>
                                <div class="stat-label">å°ˆæ¥­æŒ‡æ•¸ (é«˜åº¦)</div>
                                <div class="stat-desc-static">
                                    ä»£è¡¨ç‰¹å®šå°ˆæ¥­é ˜åŸŸçš„é«˜åº¦ã€‚<br>
                                    7åˆ†ä»£è¡¨èƒ½äº«å—å‰µä½œï¼Œä¸¦æŒçºŒæŠ•å…¥ã€‚<br>
                                    12åˆ†ç‚ºæŠ•å…¥å¤§é‡æ™‚é–“çš„å°ˆå®¶é–€æª»ã€‚
                                </div>
                            </div>
                            <div class="stat-value-container">
                                <div class="stat-value" id="score-depth">0</div>
                                <div class="stat-rank" id="title-depth">ğŸ§¸ å°‹æ‰¾æ¨‚è¶£</div>
                            </div>
                        </div>
                        <div class="diagnosis-box" id="desc-depth">
                            ...
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="definitions-section">
            <div class="section-title">ğŸ“Š å…­å¤§å‰µé€ åŠ›å‘åº¦èªªæ˜</div>
            <div class="def-grid">
                <div class="def-card"><div class="def-title">ğŸ“ æ–‡å­— (Text)</div>ç¬¦è™Ÿèˆ‡è§€å¿µçš„ç·¨ç¢¼èƒ½åŠ›ã€‚åŒ…å«å¯«ä½œã€è©©è©ã€åŠ‡æœ¬æ§‹æ€ï¼Œå°‡æŠ½è±¡æ€æƒ³è½‰åŒ–ç‚ºç²¾ç¢ºçš„æ–‡å­—ç¬¦è™Ÿã€‚</div>
                <div class="def-card"><div class="def-title">ğŸ—£ï¸ å£èªª (Oral)</div>èªè¨€èˆ‡è²éŸ³çš„è¡¨é”èƒ½åŠ›ã€‚åŒ…å«æ¼”èªªã€æœ—èª¦ã€æ•˜äº‹ï¼Œå°‡æ–‡å­—ç¬¦è™Ÿè½‰åŒ–ç‚ºå…·å‚™æ„ŸæŸ“åŠ›çš„è²éŸ³èªè¨€ã€‚</div>
                <div class="def-card"><div class="def-title">ğŸµ éŸ³æ¨‚ (Music)</div>è½è¦ºèˆ‡å¾‹å‹•çš„æ„ŸçŸ¥èƒ½åŠ›ã€‚åŒ…å«æ—‹å¾‹å‰µä½œã€ç¯€å¥æŒæ¡ã€éŸ³æ„Ÿï¼Œæ•æ‰æ™‚é–“æµå‹•ä¸­çš„è½è¦ºç¾æ„Ÿã€‚</div>
                <div class="def-card"><div class="def-title">ğŸ’ƒ èˆå‹• (Dance)</div>èº«é«”èˆ‡å‹•æ…‹çš„è¡¨ç¾èƒ½åŠ›ã€‚åŒ…å«è‚¢é«”å”èª¿ã€å‹•ä½œè¨­è¨ˆã€æˆ²åŠ‡èº«æ®µï¼Œå°‡å…§åœ¨æƒ…æ„Ÿè½‰åŒ–ç‚ºèº«é«”çš„èªè¨€ã€‚</div>
                <div class="def-card"><div class="def-title">ğŸ—¿ å½¢å¡‘ (Form)</div>è§¸è¦ºèˆ‡ç©ºé–“çš„å»ºæ§‹èƒ½åŠ›ã€‚åŒ…å«é›•å¡‘ã€ç«‹é«”é€ å‹ã€æ‰‹ä½œå·¥è—ï¼Œè™•ç†ä¸‰ç¶­ç©ºé–“ä¸­çš„ç‰©è³ªèˆ‡çµæ§‹ã€‚</div>
                <div class="def-card"><div class="def-title">ğŸ¨ ç¹ªåœ– (Draw)</div>è¦–è¦ºèˆ‡å¹³é¢çš„å†ç¾èƒ½åŠ›ã€‚åŒ…å«æ§‹åœ–ã€è‰²å½©ã€ç·šæ¢æç¹ªï¼Œå°‡ä¸‰ç¶­ä¸–ç•Œçš„è§€å¯Ÿè½‰åŒ–ç‚ºäºŒç¶­å¹³é¢çš„è¦–è¦ºç¬¦è™Ÿã€‚</div>
            </div>
        </div>
        
        <div style="margin-top: 20px; font-size: 0.8em; color: #bbb; text-align: center;">*æœ¬è©•é‡è¡¨åƒ…ä¾›è‡ªæˆ‘æ¢ç´¢èˆ‡æ•™å­¸è¼”åŠ©ä½¿ç”¨</div>
    </div>

    <button class="btn" onclick="downloadResult()">ä¸‹è¼‰æˆ‘çš„å‰µä½œåŠ›åˆ†æåœ–</button>
</div>

<script>
    const dimensions = [
        { id: 'text', name: 'æ–‡å­—', eng:'Text', val: 1 },
        { id: 'oral', name: 'å£èªª', eng:'Oral', val: 1 },
        { id: 'music', name: 'éŸ³æ¨‚', eng:'Music', val: 1 },
        { id: 'dance', name: 'èˆå‹•', eng:'Dance', val: 1 },
        { id: 'form', name: 'å½¢å¡‘', eng:'Form', val: 1 },
        { id: 'draw', name: 'ç¹ªåœ–', eng:'Draw', val: 1 }
    ];

    const levels = [
        "1. å¾æœªæ€è€ƒè¦é€éé€™å€‹æ–¹æ³•å˜—è©¦å‰µä½œ",
        "2. å˜—è©¦éå‰µä½œä½†æ„Ÿå—ä¸åˆ°æ¨‚è¶£",
        "3. å˜—è©¦éå‰µä½œï¼Œæ˜ç™½å¦‚æœæŠ•å…¥æ™‚é–“çš„è©±å¯ä»¥å¾—åˆ°æ¨‚è¶£",
        "4. å¯ä»¥å¾å‰µä½œä¸­å¾—åˆ°æ¨‚è¶£",
        "5. å¯ä»¥å¾—åˆ°æ¨‚è¶£ï¼Œä¸¦ä¸”é¡˜æ„ç´¯ç©ä½œå“",
        "6. ç„¡æ³•æŒæ¡å‰µä½œæŠ€è¡“ï¼Œä½†æ˜ç™½æŠ€è¡“åŸç†",
        "7. æŒæ¡åˆæ­¥çš„æŠ€è¡“ï¼Œåœ¨å”åŠ©ä¹‹ä¸‹å¯ä»¥å®Œæˆä½œå“",
        "8. æŠ€è¡“å®Œæ•´ï¼Œèƒ½ç¨ç«‹å®Œæˆä½œå“",
        "9. æŠ€è¡“ç†Ÿç·´ï¼Œä½†ä½œå“å°šæœªèƒ½ä½œç‚ºç¯„ä¾‹å±•ç¤º",
        "10. æŠ€è¡“ç´”ç†Ÿï¼Œä½œå“å¯ä½œç‚ºç¯„ä¾‹",
        "11. æŠ€è¡“å…§åŒ–ï¼Œå‰µä½œæ™‚èƒ½ç›´è¦ºé‹ç”¨ï¼Œæ„åˆ°ç­†éš¨",
        "12. æŠ€å·§æˆç†Ÿä¸”å…·å‚™ç¨ç‰¹å€‹äººè¾¨è­˜åº¦ï¼Œå½¢æˆç©©å®šé¢¨æ ¼",
        "13. æœ‰ç©©å®šçš„å‰µä½œç”¢å‡ºï¼Œä¸”ä½œå“ç²å¾—æ™®éè®šè³",
        "14. æœ‰ç©©å®šçš„å‰µä½œç”¢å‡ºï¼Œä¸”ä½œå“èƒ½åœ¨åŒè³ªæ€§ä½œå“ä¸­è„«ç©è€Œå‡º",
        "15. æœ‰ç©©å®šçš„å‰µä½œç”¢å‡ºï¼Œä¸”ä½œå“è¢«è¦–ç‚ºåŒä¸–ä»£æœ€é«˜æ°´æº–"
    ];

    const container = document.getElementById('inputs-container');
    dimensions.forEach((dim, index) => {
        const div = document.createElement('div');
        div.className = 'input-group';
        div.innerHTML = `
            <label>
                <span>${dim.name} <small style="font-weight:normal; color:#888;">${dim.eng}</small></span>
                <span class="score-display" id="val-${index}">1</span>
            </label>
            <input type="range" min="1" max="15" value="1" data-index="${index}" oninput="updateValue(this)">
            <div class="desc-box" id="desc-${index}">${levels[0]}</div>
        `;
        container.appendChild(div);
    });

    const ctx = document.getElementById('radarChart').getContext('2d');
    const chart = new Chart(ctx, {
        type: 'radar',
        data: {
            labels: dimensions.map(d => d.name),
            datasets: [{
                label: 'å‰µä½œåŠ›åˆ†å¸ƒ',
                data: dimensions.map(d => d.val),
                backgroundColor: 'rgba(230, 126, 34, 0.2)',
                borderColor: 'rgba(230, 126, 34, 1)',
                pointBackgroundColor: 'rgba(44, 62, 80, 1)',
                borderWidth: 2,
                pointRadius: 3
            }]
        },
        options: {
            scales: {
                r: {
                    angleLines: { display: true },
                    suggestedMin: 0,
                    suggestedMax: 15,
                    ticks: { stepSize: 5, display: false }
                }
            },
            plugins: { legend: { display: false } }
        }
    });

    function updateValue(input) {
        const index = parseInt(input.getAttribute('data-index'));
        const val = parseInt(input.value);
        dimensions[index].val = val;
        document.getElementById(`val-${index}`).innerText = val;
        document.getElementById(`desc-${index}`).innerText = levels[val - 1];
        chart.data.datasets[0].data = dimensions.map(d => d.val);
        chart.update();
        calculateIndices();
    }

    function calculateIndices() {
        const vals = dimensions.map(d => d.val);
        let area = 0;
        const sin60 = Math.sin(60 * Math.PI / 180);
        for (let i = 0; i < 6; i++) {
            let a = vals[i];
            let b = vals[(i + 1) % 6]; 
            area += 0.5 * a * b * sin60;
        }
        const compositeIndex = parseFloat(area.toFixed(1));

        let sortedVals = [...vals].sort((a, b) => b - a);
        let max1 = sortedVals[0];
        let max2 = sortedVals[1];
        let baseAvg = (max1 + max2) / 2;
        let isAdjacent = false;
        for(let i=0; i<6; i++) {
            let a = vals[i];
            let b = vals[(i+1)%6];
            if ( (a + b) === (max1 + max2) ) {
                isAdjacent = true;
                break;
            }
        }
        let depthIndex = 0;
        if (isAdjacent) {
            depthIndex = baseAvg * (1 + compositeIndex / 1000);
        } else {
            depthIndex = baseAvg;
        }
        
        document.getElementById('score-area').innerText = compositeIndex;
        document.getElementById('score-depth').innerText = depthIndex.toFixed(1);

        // --- 2.1 è©•ç´šèˆ‡è¨ºæ–·é‚è¼¯ (Updated) ---
        
        // 1. ç¶œåˆæŒ‡æ•¸ (å»£åº¦)
        let areaTitle = "";
        let areaDesc = "";
        if (compositeIndex <= 15) {
            areaTitle = "âš™ï¸ æ©Ÿæ¢°æ¨¡å¼";
            areaDesc = "æ‚¨å¯èƒ½éè‘—æŒ‰éƒ¨å°±ç­ï¼Œä½†ç¨å¾®æœ‰é»è¦å¾‹å‘†æ¿çš„ç”Ÿæ´»ï¼Œå°±ç®—ä½ å°æ–¼äººç”Ÿï¼Œå°æ–¼ä¸–ç•Œæœ‰å¾ˆå¤šæƒ³æ³•ï¼Œä½†å»ç¼ºä¹å°‡å…¶è¡¨ç¾å‡ºä¾†çš„å‹•åŠ›ã€‚";
        } else if (compositeIndex <= 60) {
            areaTitle = "ğŸ“» å–®å‘æ¥æ”¶";
            areaDesc = "æ‚¨å¯èƒ½å¾ˆæ¨‚æ„æ¥æ”¶å„ç¨®ä»–äººçš„å‰µä½œï¼Œä½†å¾ˆå°‘å˜—è©¦æŒæ¡æŠ€è¡“å»æˆç‚ºå‰µä½œè€…ã€‚å¯èƒ½ä½ èƒ½è¡¨é”ã€Œå¾ˆå–œæ­¡ã€ï¼Œä½†èº«é‚Šçš„äººæœªå¿…çŸ¥é“ä½ ç‚ºä»€éº¼å–œæ­¡ã€‚";
        } else if (compositeIndex <= 180) {
            areaTitle = "ğŸ¨ å‰µé€ ç”Ÿæ´»";
            areaDesc = "é€™æ˜¯æœ€å¯¬å»£çš„å€é–“ã€‚æ‚¨å¯èƒ½æ˜¯åœ¨å¤šå€‹é ˜åŸŸéƒ½èƒ½æ‰¾åˆ°æ¨‚è¶£çš„ã€Œç”Ÿæ´»å®¶ã€ï¼Œæˆ–æ˜¯å°ˆç²¾æ–¼å–®ä¸€æŠ€è—çš„ã€Œè·äººã€ã€‚æ‚¨å·²å…·å‚™å°‡æƒ³æ³•å€’å‡ºä¾†çš„èƒ½åŠ›ï¼Œå·®åˆ¥åœ¨æ–¼å°ˆç²¾åˆ°ä»€éº¼ç¨‹åº¦ï¼Œæˆ–å¤šå…ƒåˆ°ä»€éº¼åœ°æ­¥ã€‚";
        } else {
            areaTitle = "ğŸŒ è·¨åŸŸæ•´åˆ";
            areaDesc = "æ‚¨ä¸åƒ…æŠ€è¡“ç´”ç†Ÿï¼Œä¸”è§¸è§’å¯¬å»£ï¼Œè‡³å°‘æœ‰å…©å€‹é …ç›®ä»¥ä¸Šçš„å°ˆæ¥­æ˜¯å‚™å—è‚¯å®šçš„ï¼Œå› æ­¤å…·æœ‰å¼·å¤§çš„è·¨åŸŸæ•´åˆèƒ½åŠ›ï¼Œèƒ½å¤ åœ¨è¨±å¤šå±¤é¢éƒ½ç™¼æ®æ‰è¯ã€‚";
        }
        document.getElementById('title-area').innerText = areaTitle;
        document.getElementById('desc-area').innerText = areaDesc;
        
        const areaColor = compositeIndex > 180 ? "#e67e22" : (compositeIndex > 60 ? "#2c3e50" : "#bdc3c7");
        document.getElementById('desc-area').style.borderLeftColor = areaColor;


        // 2. å°ˆæ¥­æŒ‡æ•¸ (é«˜åº¦) - åŸæ·±åº¦æŒ‡æ•¸
        let depthTitle = "";
        let depthDesc = "";
        if (depthIndex < 7) {
            depthTitle = "ğŸ§¸ å°‹æ‰¾æ¨‚è¶£";
            depthDesc = "æœ‰äº›æ™‚å€™ä½ æœƒæ‡·ç–‘ï¼Œç‚ºä»€éº¼å¤§å®¶è¦é€™éº¼åšï¼Œä½ é‚„åœ¨å°‹æ‰¾å‰µä½œçš„æ¨‚è¶£ã€‚";
        } else if (depthIndex < 12) {
            depthTitle = "ğŸ› ï¸ æŒæ¡æŠ€è¡“";
            depthDesc = "å¯èƒ½é‚„ç¨±ä¸ä¸Šç‰¹åˆ¥æŠ•å…¥ï¼Œä½†ä½ åœ¨æŸäº›éƒ¨åˆ†æ˜¯æ“æœ‰å‰µä½œèƒ½åŠ›çš„ã€‚";
        } else if (depthIndex < 15) {
            depthTitle = "ğŸ’ èè‹±é”äºº";
            depthDesc = "ä½ æ˜¯ç‰¹å®šé ˜åŸŸçš„å°ˆæ¥­å‰µä½œè€…ï¼Œå®Œæˆçš„ä½œå“è‚¯å®šéƒ½æ˜¯å¹³å‡ä»¥ä¸Šçš„æ°´æº–ã€‚";
        } else {
            depthTitle = "ğŸ‘‘ å¤§å¸«";
            depthDesc = "ä½ ä¸ä½†æ˜¯å°ˆå®¶é”äººï¼Œè€Œä¸”åœ¨å…©å€‹ä»¥ä¸Šçš„é ˜åŸŸæœ‰æ¥µä½³çš„è¡¨ç¾ï¼Œæ˜¯å…¼å…·å»£åº¦èˆ‡æ·±åº¦çš„å¤§å¸«ã€‚";
        }
        document.getElementById('title-depth').innerText = depthTitle;
        document.getElementById('desc-depth').innerText = depthDesc;
        
        const depthColor = depthIndex >= 15 ? "#e67e22" : (depthIndex >= 12 ? "#2c3e50" : "#bdc3c7");
        document.getElementById('desc-depth').style.borderLeftColor = depthColor;
    }

    function downloadResult() {
        const element = document.getElementById('capture-area');
        const input = document.getElementById('username');
        const nameValue = input.value || 'æœªå‘½å';
        const originalWrapper = document.getElementById('original-name-wrapper');
        const nameSection = document.getElementById('name-section-container');

        // Name Fix
        const decoyDiv = document.createElement('div');
        decoyDiv.style.background = "#f1f4f6";
        decoyDiv.style.padding = "10px 20px";
        decoyDiv.style.borderRadius = "50px";
        decoyDiv.style.border = "1px solid #ddd";
        decoyDiv.style.display = "inline-block";
        decoyDiv.style.textAlign = "center";
        
        decoyDiv.innerHTML = `
            <span style="font-weight: bold; color: #2c3e50; font-size: 1.1em; margin-right: 10px;">å‰µä½œè€…å§“åï¼š</span>
            <span style="font-size: 1.3em; color: #e67e22; font-weight: bold; font-family: 'Microsoft JhengHei', sans-serif; border-bottom: 2px solid #ccc; padding-bottom: 2px;">${nameValue}</span>
        `;

        originalWrapper.style.display = 'none';
        nameSection.appendChild(decoyDiv);

        // Slider Fix
        const ranges = element.querySelectorAll('input[type="range"]');
        const tempSliders = [];

        ranges.forEach(range => {
            const val = parseInt(range.value);
            const max = parseInt(range.max);
            const percent = (val - 1) / (max - 1) * 100;

            const fakeSlider = document.createElement('div');
            fakeSlider.style.height = "6px";
            fakeSlider.style.background = "#ddd";
            fakeSlider.style.margin = "10px 0";
            fakeSlider.style.position = "relative";
            fakeSlider.style.borderRadius = "3px";
            fakeSlider.style.width = "100%";

            const thumb = document.createElement('div');
            thumb.style.position = "absolute";
            thumb.style.left = `${percent}%`;
            thumb.style.top = "50%";
            thumb.style.transform = "translate(-50%, -50%)";
            thumb.style.width = "16px";
            thumb.style.height = "16px";
            thumb.style.background = "#2c3e50";
            thumb.style.borderRadius = "50%";
            
            fakeSlider.appendChild(thumb);

            range.style.display = 'none';
            range.parentNode.insertBefore(fakeSlider, range);
            tempSliders.push({ real: range, fake: fakeSlider });
        });

        const originalBg = element.style.backgroundColor;
        element.style.backgroundColor = "#ffffff";
        
        html2canvas(element, { scale: 2 }).then(canvas => {
            const link = document.createElement('a');
            link.download = `å‰µä½œåŠ›åˆ†æ2.1_${nameValue}.png`;
            link.href = canvas.toDataURL();
            link.click();
            
            element.style.backgroundColor = originalBg;
            decoyDiv.remove();
            originalWrapper.style.display = 'inline-flex';
            tempSliders.forEach(item => {
                item.fake.remove();
                item.real.style.display = 'block';
            });
        });
    }

    calculateIndices();
</script>

</body>
</html>